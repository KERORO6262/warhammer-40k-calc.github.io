<!DOCTYPE html>
<html lang="zh-Hant">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>æˆ°éŒ˜ 40K ç·¨éšŠæ¬Šé‡è¨ˆç®—å™¨ v4.6</title>
        <link rel="stylesheet" href="assets/css/style.css">
    </head>
    <body>

        <div class="container">
            <div class="panel">
                <h2>å–®ä½ç·¨è¼¯å™¨ (Unit Editor)</h2>
                <form id="unitForm">
                    <input type="hidden" id="editIndex" value="-1">

                    <div class="input-group">
                        <label>å–®ä½åç¨± (Unit Name)</label>
                        <input type="text" id="uName"
                            placeholder="ä¾‹å¦‚: Terminator Squad" required>
                    </div>

                    <div class="input-row">
                        <div class="input-group" style="flex:1">
                            <label>åˆ†æ•¸ (Points)</label>
                            <input type="number" id="uPts" value="100" required>
                        </div>
                        <div class="input-group" style="flex:1">
                            <label>æ¨¡å‹æ•¸é‡ (Models)</label>
                            <input type="number" id="uModels" value="5"
                                placeholder="ç”¨æ–¼çµ±è¨ˆ">
                        </div>
                    </div>

                    <h3>ğŸ›¡ï¸ ç”Ÿå­˜èˆ‡æˆ°è¡“æ•¸æ“š (Stats)</h3>
                    <div class="input-row">
                        <div class="input-group"><label>å¼·éŸŒåº¦
                                (Toughness)</label><input type="number" id="uT"
                                value="4"></div>
                        <div class="input-group"><label>è­·ç”²ä¿è­·
                                (Save)</label><input type="number" id="uSv"
                                value="3" placeholder="3+"></div>
                        <div class="input-group"><label>ç¸½è¡€é‡
                                (Wounds)</label><input type="number" id="uW"
                                value="10"></div>
                    </div>
                    <div class="input-row">
                        <div class="input-group"><label>é ˜å°å€¼
                                (Leadership)</label><input type="number"
                                id="uLd" value="6" placeholder="6+"></div>
                        <div class="input-group"><label>ç›®æ¨™æ§åˆ¶ (OC)</label><input
                                type="number" id="uOC" value="10"></div>
                        <div class="input-group"><label>ç‰¹æ®Šä¿è­·
                                (Invulnerable)</label><input type="number"
                                id="uInv" placeholder="4+" value="7"></div>
                        <div class="input-group"><label>ä¸è¦ºç–¼ç—› (FNP)</label><input
                                type="number" id="uFNP" placeholder="6+"
                                value="7"></div>
                    </div>

                    <h3>âš”ï¸ æ­¦å™¨é…ç½® (Weapons)</h3>

                    <div class="input-row">
                        <div class="input-group" style="flex:3;">
                            <label>æ­¦å™¨åç¨± (Weapon Name)</label>
                            <input type="text" id="wName"
                                placeholder="ä¾‹å¦‚: Storm Bolter">
                        </div>
                        <div class="input-group" style="flex:1;">
                            <label>æ•¸é‡ (Qty)</label>
                            <input type="number" id="wQty" value="1" min="1">
                        </div>
                    </div>

                    <div class="weapon-stats-grid">
                        <div class="input-group"><label>æ”»æ“Š (A)</label><input
                                type="number" id="wA" value="2"></div>
                        <div class="input-group"><label>æŠ€å·§ (BS/WS)</label><input
                                type="number" id="wHit" value="3"
                                placeholder="3+"></div>
                        <div class="input-group"><label>åŠ›é‡ (S)</label><input
                                type="number" id="wS" value="4"></div>
                        <div class="input-group"><label>ç©¿ç”² (AP)</label><input
                                type="number" id="wAP" value="0"
                                placeholder="0"></div>
                        <div class="input-group"><label>å‚·å®³ (D)</label><input
                                type="number" id="wD" value="1"></div>
                    </div>
                    <div class="kw-panel" style="border-color: var(--accent);">
                        <label
                            style="color:var(--accent); font-size:0.9rem; margin-bottom:8px; display:block; border-bottom:1px solid #4a5568; padding-bottom:5px;">
                            ğŸ‘‘ é ˜è¢–èˆ‡å…‰ç’°å¢ç›Š (Leader & Aura Buffs)
                        </label>
                        <div
                            style="font-size: 0.8rem; color: #a0aec0; margin-bottom: 8px;">
                            è¨­å®šé ˜è¢–è³¦äºˆçš„å…·é«”æ•¸å€¼ (è‹¥ç„¡å‰‡ç•™ç©ºæˆ–å¡«é è¨­å€¼)ï¼š
                        </div>

                        <div class="kw-grid" style="margin-bottom: 10px;">
                            <div class="kw-check-row">
                                <span>è³¦äºˆ: è‡´æ­» (Lethal)</span>
                                <input type="checkbox" id="buffLethal">
                            </div>
                            <div class="kw-check-row">
                                <span>è³¦äºˆ: æ¯€æ»… (Dev. W)</span>
                                <input type="checkbox" id="buffDev">
                            </div>
                            <div class="kw-check-row">
                                <span>é›£ä»¥å—å‚· (-1 Wound)</span>
                                <input type="checkbox" id="buffMinusWound">
                            </div>
                        </div>

                        <div
                            style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px;">
                            <div class="input-group">
                                <label>å‘½ä¸­åŠ å€¼ (+Hit)</label>
                                <input type="number" id="buffHit"
                                    placeholder="0" value="0">
                            </div>
                            <div class="input-group">
                                <label>æŒçºŒæ‰“æ“Š (Sus)</label>
                                <input type="number" id="buffSus"
                                    placeholder="0" value="0">
                            </div>
                            <div class="input-group">
                                <label>ç›”ä¿ä¿®æ­£ (Sv Mod)</label>
                                <input type="number" id="buffSv" placeholder="0"
                                    value="0" title="è¼¸å…¥ 1 ä»£è¡¨è­·ç”²å¾ 3+ è®Š 2+">
                            </div>
                            <div class="input-group">
                                <label>è³¦äºˆç‰¹ä¿ (Inv)</label>
                                <input type="number" id="buffInv"
                                    placeholder="7" value="7">
                            </div>
                            <div class="input-group">
                                <label>è³¦äºˆFNP</label>
                                <input type="number" id="buffFnp"
                                    placeholder="7" value="7">
                            </div>
                        </div>
                    </div>
                    <div class="kw-panel">
                        <label
                            style="color:var(--accent); font-size:0.85rem; margin-bottom:8px; display:block; border-bottom:1px solid #4a5568; padding-bottom:5px;">
                            ç‰¹æ•ˆåƒæ•¸ (Effect Parameters)
                        </label>
                        <div class="kw-grid">
                            <div class="input-group">
                                <label>æŒçºŒæ‰“æ“Š (Sustained Hits)</label>
                                <select id="kwSus"><option value="0">ç„¡
                                        (None)</option><option
                                        value="1">1</option><option
                                        value="2">2</option><option
                                        value="3">D3</option></select>
                            </div>
                            <div class="input-group">
                                <label>æš´æ“Šè§¸ç™¼ (Critical On)</label>
                                <select id="kwCrit"><option value="6">6 (æ¨™æº–
                                        Standard)</option><option
                                        value="5">5+</option><option
                                        value="4">4+</option><option
                                        value="2">2+ (Anti-X)</option></select>
                            </div>

                            <div class="input-group"
                                style="grid-column: span 2;">
                                <label>æ“‡ä¸€çµ„åˆ¥ä»£è™Ÿ (Select-One Group ID)</label>
                                <input type="text" id="wGrp"
                                    placeholder="ä¾‹å¦‚: A (åŒçµ„å–æœ€é«˜åˆ†) / Leave empty if distinct"
                                    style="border-color:#d69e2e;">
                            </div>

                            <div class="kw-check-row">
                                <span>è‡´æ­»æ‰“æ“Š (Lethal Hits)</span>
                                <input type="checkbox" id="kwLethal">
                            </div>
                            <div class="kw-check-row">
                                <span>æ¯€æ»…å‰µå‚· (Dev. Wounds)</span>
                                <input type="checkbox" id="kwDev">
                            </div>
                            <div class="kw-check-row">
                                <span>é›™é€£ (Twin-Linked)</span>
                                <input type="checkbox" id="kwTwin">
                            </div>
                            <div class="kw-check-row">
                                <span>æ´ªæµ (Torrent)</span>
                                <input type="checkbox" id="kwTorrent">
                            </div>
                        </div>
                        <div class="input-group" style="margin-top:10px;">
                            <label>å…¶ä»–é—œéµè© (Other Keywords)</label>
                            <input type="text" id="wTags"
                                placeholder="Blast, Heavy, Pistol...">
                        </div>
                    </div>

                    <button type="button" class="btn btn-sec"
                        onclick="addWeaponBuffer()">+ åŠ å…¥æ­¦å™¨ (Add Weapon)</button>
                    <div id="weaponBufferList"
                        style="margin:10px 0; color:#cbd5e0; font-size:0.9rem; text-align:center;">(æš«ç„¡æ­¦å™¨
                        No Weapons)</div>

                    <div style="display:flex; gap:10px; margin-top:20px;">
                        <button type="submit" class="btn btn-add">ğŸ’¾ å„²å­˜å–®ä½ (Save
                            Unit)</button>
                        <button type="button" class="btn btn-sec"
                            onclick="resetForm()">é‡ç½® (Reset)</button>
                    </div>
                </form>
            </div>

            <div>
                <div class="panel"
                    style="margin-bottom: 20px; padding: 15px; display: flex; align-items: center; justify-content: space-between;">
                    <label
                        style="color: var(--text-main); font-weight: bold;">âš”ï¸
                        æˆ°å±€è¦æ¨¡ (Game Size):</label>
                    <select id="gameSizeSelect"
                        style="width: 200px; border-color: var(--accent);">
                        <option value="1000">1000 åˆ† (Incursion)</option>
                        <option value="2000" selected>2000 åˆ† (Strike
                            Force)</option>
                        <option value="3000">3000 åˆ† (Onslaught)</option>
                    </select>
                </div>

                <div class="dashboard">
                    <div class="score-card" id="cardPoints">
                        <small>è»éšŠç¸½åˆ† (Total Points)</small>
                        <strong id="totalPoints">0</strong>
                    </div>
                    <div class="score-card" id="cardOffense">
                        <small>æ”»æ“Šè©•åˆ† (Offense)</small>
                        <strong class="text-accent" id="totalOffense">0</strong>
                    </div>
                    <div class="score-card" id="cardDefense">
                        <small>é˜²ç¦¦è©•åˆ† (Defense)</small>
                        <strong class="text-blue" id="totalDefense">0</strong>
                    </div>
                    <div class="score-card" id="cardTactical">
                        <small>æˆ°è¡“æ¬Šé‡ (Tactical)</small>
                        <strong class="text-green" id="totalTactical">0</strong>
                    </div>
                </div>

                <div class="panel">
                    <h3>ç·¨éšŠåå–® (Army Roster)</h3>
                    <table id="rosterTable">
                        <thead>
                            <tr>
                                <th width="10%" style="text-align:center;">æ•¸é‡
                                    (Qty)</th> <th width="30%">å–®ä½è³‡è¨Š (Unit
                                    Info)</th> <th width="20%">åŸºç¤æ•¸å€¼ (Stats)</th>
                                <th width="30%">æˆ°åŠ›åˆ†æ (Analysis)</th>
                                <th width="15%">æ“ä½œ (Action)</th>
                            </tr>
                        </thead>
                        <tbody id="rosterBody"></tbody>
                    </table>

                    <div style="margin-top:15px; text-align:right;">
                        <button class="btn btn-danger" style="width:auto;"
                            onclick="clearAll()">æ¸…é™¤æ‰€æœ‰ (Clear All)</button>
                        <button class="btn btn-sec" style="width:auto;"
                            onclick="exportData()">åŒ¯å‡º JSON</button>
                        <input type="file" id="importFile" style="display:none;"
                            onchange="importData(this)">
                        <button class="btn btn-sec" style="width:auto;"
                            onclick="document.getElementById('importFile').click()">åŒ¯å…¥
                            JSON</button>
                    </div>
                </div>
            </div>
        </div>

        <script src="assets/js/script.js"></script>

    </body>
</html>